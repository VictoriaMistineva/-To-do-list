export const createNanoEvents = () => {
    let events = {};
    const emit = (event, ...args) => {
        for (const listener of events[event] || []) {
            listener(...args);
        }
    };
    const on = (event, cb) => {
        (events[event] = events[event] || []).push(cb);
        return () => {
            events[event] = events[event].filter((i) => i !== cb);
        };
    };
    const once = (event, cb) => {
        // eslint-disable-next-line
        // @ts-ignore И вот тут я сдался
        const off = on(event, (...args) => {
            cb(...args);
            off();
        });
        return off;
    };
    const clear = () => {
        events = {};
    };
    return {
        events,
        emit,
        on,
        once,
        clear,
    };
};
